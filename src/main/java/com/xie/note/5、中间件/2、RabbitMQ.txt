消息队列的应用场景：
    异步处理
    应用解耦
    流量削峰
消息对俄的缺点
    系统可用性降低
        引入外部依赖越多，越容易挂掉。
    系统复杂度提高
       保中不重复消费、消息丢失问题、传递的顺序性
    一致性问题
        异步处理时的一致性用不用保证
两种实现方式
    JMS和AMQP
    JMS是定义了统一的接口，来对消息操作进行统一；AMQP是通过规定协议来统一数据交互的格式
    JMS限定了必须使用Java语言；AMQP只是协议，不规定实现方式，因此是跨语言的。
    JMS规定了两种消息模型；而AMQP的消息模型更加丰富

常用的MQ
    ActiveMQ
        基于JMS，吞吐量不够，社区不活跃，
        主从架构实现高可用
        消息可靠
    RabbitMQ
        基于AMQP，吞吐量不够，社区活跃
        镜像集群实现高可用
        保证数据不丢失
        高级功能：消息重试、死信队列
    RocketMQ
        基于JMS，阿里巴巴的
        分布式架构，可以搭建大规模集群，性能高
        高吞吐，可达10w
    Kafka
        分布式消息系统，高吞吐量
        功能比较单一，就是消息的接受和发送
        主要应用于大数据领域，使用它进行用户行为日志的采集和计算

RabbitMQ的工作原理
    组成部分
        Broker：消息队列服务进程，此进程包括两个部分：Exchange和Queue
            Exchange：消息队列交换机，按一定的规则将消息路由转发到某个队列，对消息进行过虑。
            Queue：消息队列，存储消息的队列，消息到达队列并转发给指定的消费者
        Producer：消息生产者，即生产方客户端，生产方客户端将消息发送
        Consumer：消息消费者，即消费方客户端，接收MQ转发的消息。

    生产者发送消息流程：
        1、生产者和Broker建立TCP连接。
        2、生产者和Broker建立通道。
        3、生产者通过通道消息发送给Broker，由Exchange将消息进行转发。
        4、Exchange将消息转发到指定的Queue（队列）

    消费者接收消息流程：
        1、消费者和Broker建立TCP连接
        2、消费者和Broker建立通道
        3、消费者监听指定的Queue（队列）
        4、当有消息到达Queue时Broker默认将消息推送给消费者。
        5、消费者接收到消息。
        6、ack回复

交换机的类型
    Direct exchange（直连交换机）
        直连型交换机（direct exchange）是根据消息携带的路由键（routing key）将消息投递给对应队列的
            1、将一个队列绑定到某个交换机上，同时赋予该绑定一个路由键（routing key）
            2、当一个携带着路由值为R的消息被发送给直连交换机时，交换机会把它路由给绑定值同样为R的队列。
    Fanout exchange（扇型交换机）
        扇型交换机（funout exchange）将消息路由给绑定到它身上的所有队列。
        不同于直连交换机，路由键在此类型上不启任务作用。
        如果N个队列绑定到某个扇型交换机上，当有消息发送给此扇型交换机时，交换机会将消息的发送给这所有的N个队列
    Topic exchange（主题交换机）
        主题交换机（topic exchanges）中，队列通过路由键绑定到交换机上，然后，交换机根据消息里的路由值，将消息路由给一个或多个绑定队列。
        扇型交换机和主题交换机异同：
            对于扇型交换机路由键是没有意义的，只要有消息，它都发送到它绑定的所有队列上
            对于主题交换机，路由规则由路由键决定，只有满足路由键的规则，消息才可以路由到对应的队列上
        规则
            * (星号) 用来表示一个单词 (必须出现的)
            # (井号) 用来表示任意数量（零个或多个）单词
        强大之处
            当一个队列的绑定键为 #（井号） 的时候，这个队列将会无视消息的路由键，接收所有的消息。
            当* (星号) 和#(井号) 这两个特殊字符都未在绑定键中出现的时候，此时主题交换机就拥有的直连交换机的行为。
            所以主题交换机也就实现了扇形交换机的功能，和直连交换机的功能。

不同交换机的代码实现方式
    xxx

消息回调



四种部署方式
